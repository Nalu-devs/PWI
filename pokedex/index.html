<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Pokedex</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>

<body>

    <main>
        <div class="conteudo">
            <div class="misty">
                <img src="imagens/misty.webp" alt="Misty pokemon">
            </div>
            <div class="carcaca">
                <div class="tela">
                    <input id="nome" class="nome" type="text">
                    <img id="img">
                    <input id="numeroPokemon" class="numeroPokemon" type="text">
                    <input id="tipo" class="tipoPokemon" type="text">
                </div>
                <div class="botoes">
                    <input id="pokemon" placeholder="Nº OU NOME DO POKÉMON"><br>
                    <button id="numero"> Buscar Pokémon! </button> <br>
                </div>
            </div>
            <div class="ash">
                <img src="imagens/ash.webp" alt="Ash pokemon">
            </div>
        </div>
    </main>


    <script>
        var nome = document.getElementById(("nome"))
        var numeroPokemon = document.getElementById("numeroPokemon")
        var img = document.getElementById("img")
        var tipo = document.getElementById("tipo")

        var pokemon = document.getElementById("pokemon")
        var numero = document.getElementById("numero")

        function gerarPokemon() {
            var url = "https://pokeapi.co/api/v2/pokemon/" + pokemon.value
            fetch(url)
                .then(response => {
                    if (!response.ok) { //analisa se o nome ou id existe
                        throw new Error('Pokémon não encontrado!');//caso n exista
                    }
                    return response.json();//retorna a funcao
                })
                .then((dados) => {

                    tipo.value = dados.types[0].type.name//como tipos é um vetor precisamos declarar qual indice queremos
                    nome.value = dados.name
                    numeroPokemon.value = dados.id
                    img.src = dados.sprites.other.dream_world.front_default
                    img.style.height = "182px"
                    img.style.width = "206px"

                })
                .catch(error => {//caso der erro (pokemon não encontrado etc)
                    tipo.value = "";
                    nome.value = "Não encontrado!";
                    numeroPokemon.value = ""; //limpa campo
                    img.src = "";
                    img.style.height = "";
                    img.style.width = "";
                });

        }
        numero.addEventListener("click", gerarPokemon);//quando o botao for clicado

        pokemon.addEventListener("keypress", function (event) {//adiciona no input caso o enter seja apertado
            if (event.keyCode === 13) {//13 é o codigo da tecla enter
                gerarPokemon();
            }
        });

    </script>
</body>

</html>